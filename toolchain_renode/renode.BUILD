load(
    "@rules_dotnet//dotnet:defs.bzl",
    "csharp_binary",
)

csharp_binary(
    name = "renode",
    srcs = [
      "src/Renode/Backends/Terminals/UartPtyTerminal.cs",
      "src/Renode/Connectors/GPIOConnector.cs",
      "src/Renode/EmulationEnvironment/EmulationEnvironment.cs",
      "src/Renode/Integrations/ArduinoLoader.cs",
      "src/Renode/Integrations/AsciinemaRecorder.cs",
      "src/Renode/Network/NetworkServer/IServerModule.cs",
      "src/Renode/Network/NetworkServer/Modules/TftpServerModule.cs",
      "src/Renode/Network/NetworkServer/NetworkServer.cs",
      "src/Renode/Network/RangeLossMediumFunction.cs",
      "src/Renode/Network/RangeMediumFunction.cs",
      "src/Renode/PlatformDescription/ConversionResult.cs",
      "src/Renode/PlatformDescription/ConversionResultType.cs",
      "src/Renode/PlatformDescription/CreationDriver.cs",
      "src/Renode/PlatformDescription/DeclarationPlace.cs",
      "src/Renode/PlatformDescription/FakeInitHandler.cs",
      "src/Renode/PlatformDescription/IInitHandler.cs",
      "src/Renode/PlatformDescription/IUsingResolver.cs",
      "src/Renode/PlatformDescription/ParsingError.cs",
      "src/Renode/PlatformDescription/ParsingException.cs",
      "src/Renode/PlatformDescription/PreLexer.cs",
      "src/Renode/PlatformDescription/SerializationProvider.cs",
      "src/Renode/PlatformDescription/Syntax/Attribute.cs",
      "src/Renode/PlatformDescription/Syntax/BoolValue.cs",
      "src/Renode/PlatformDescription/Syntax/ConstructorOrPropertyAttribute.cs",
      "src/Renode/PlatformDescription/Syntax/Description.cs",
      "src/Renode/PlatformDescription/Syntax/EmptyValue.cs",
      "src/Renode/PlatformDescription/Syntax/Entry.cs",
      "src/Renode/PlatformDescription/Syntax/EnumValue.cs",
      "src/Renode/PlatformDescription/Syntax/Grammar.cs",
      "src/Renode/PlatformDescription/Syntax/IInitable.cs",
      "src/Renode/PlatformDescription/Syntax/InitAttribute.cs",
      "src/Renode/PlatformDescription/Syntax/IPrefixable.cs",
      "src/Renode/PlatformDescription/Syntax/IrqAttribute.cs",
      "src/Renode/PlatformDescription/Syntax/IrqDestinations.cs",
      "src/Renode/PlatformDescription/Syntax/IrqEnd.cs",
      "src/Renode/PlatformDescription/Syntax/IrqReceiver.cs",
      "src/Renode/PlatformDescription/Syntax/ISimplestValue.cs",
      "src/Renode/PlatformDescription/Syntax/IVisitable.cs",
      "src/Renode/PlatformDescription/Syntax/IWithPosition.cs",
      "src/Renode/PlatformDescription/Syntax/NumericalValue.cs",
      "src/Renode/PlatformDescription/Syntax/ObjectValue.cs",
      "src/Renode/PlatformDescription/Syntax/RangeValue.cs",
      "src/Renode/PlatformDescription/Syntax/ReferenceValue.cs",
      "src/Renode/PlatformDescription/Syntax/RegistrationInfo.cs",
      "src/Renode/PlatformDescription/Syntax/SingleOrMultiIrqEnd.cs",
      "src/Renode/PlatformDescription/Syntax/StringValue.cs",
      "src/Renode/PlatformDescription/Syntax/StringWithPosition.cs",
      "src/Renode/PlatformDescription/Syntax/SyntaxTreeHelpers.cs",
      "src/Renode/PlatformDescription/Syntax/UsingEntry.cs",
      "src/Renode/PlatformDescription/Syntax/Value.cs",
      "src/Renode/PlatformDescription/UserInterface/MonitorInitHandler.cs",
      "src/Renode/PlatformDescription/UserInterface/PlatformDescriptionMachineExtensions.cs",
      "src/Renode/PlatformDescription/Variable.cs",
      "src/Renode/PlatformDescription/VariableStore.cs",
      "src/Renode/Program.cs",
      #src/Renode/"Properties/AssemblyInfo.cs",
      "src/Renode/RobotFrameworkEngine/CpuKeywords.cs",
      "src/Renode/RobotFrameworkEngine/HelperExtensions.cs",
      "src/Renode/RobotFrameworkEngine/HotSpotAction.cs",
      "src/Renode/RobotFrameworkEngine/HttpServer.cs",
      "src/Renode/RobotFrameworkEngine/IRobotFrameworkKeywordProvider.cs",
      "src/Renode/RobotFrameworkEngine/Keyword.cs",
      "src/Renode/RobotFrameworkEngine/KeywordException.cs",
      "src/Renode/RobotFrameworkEngine/KeywordManager.cs",
      "src/Renode/RobotFrameworkEngine/LedKeywords.cs",
      "src/Renode/RobotFrameworkEngine/LogTester.cs",
      "src/Renode/RobotFrameworkEngine/NetworkInterfaceKeywords.cs",
      "src/Renode/RobotFrameworkEngine/Recorder.cs",
      "src/Renode/RobotFrameworkEngine/RenodeKeywords.cs",
      "src/Renode/RobotFrameworkEngine/RobotFrameworkEngine.cs",
      "src/Renode/RobotFrameworkEngine/RobotFrameworkKeywordAttribute.cs",
      "src/Renode/RobotFrameworkEngine/TestersProvider.cs",
      "src/Renode/RobotFrameworkEngine/UartKeywords.cs",
      "src/Renode/RobotFrameworkEngine/XmlRpcServer.cs",
      "src/Renode/UI/LogoRow.cs",
      "src/Renode/UI/TerminalActions.cs",
      "src/Renode/UI/TerminalIOSource.cs",
      "src/Renode/UI/TerminalWidget.cs",
      "src/Renode/UI/TermsharpProvider.cs",
    ],
    internals_visible_to = ["//visibility:public"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//src/Infrastructure/src/Emulator/Main:Emulator",
        "//src/Infrastructure/src/Emulator/Extensions:Extensions",
        "//src/Infrastructure/src/Emulator/Peripherals:Renode-peripherals",
        "//src/Infrastructure/src/Emulator/Cores:cores-arm",
        "//src/Infrastructure/src/Emulator/Cores:cores-arm-m",
        "//src/Infrastructure/src/Emulator/Cores:cores-arm64",
        "//src/Infrastructure/src/Emulator/Cores:cores-i386",
        "//src/Infrastructure/src/Emulator/Cores:cores-ppc",
        "//src/Infrastructure/src/Emulator/Cores:cores-ppc64",
        "//src/Infrastructure/src/Emulator/Cores:cores-riscv",
        "//src/Infrastructure/src/Emulator/Cores:cores-riscv64",
        "//src/Infrastructure/src/Emulator/Cores:cores-sparc",
        "//src/Infrastructure/src/Emulator/Cores:cores-xtensa",
        "//src/Infrastructure/src/UI:UI",
        "//src/Infrastructure/src/Plugins/AdvancedLoggerViewerPlugin:AdvancedLoggerViewerPlugin",
        "//src/Infrastructure/src/Plugins/SampleCommandPlugin:SampleCommandPlugin",
        "//src/Infrastructure/src/Plugins/TracePlugin:TracePlugin",
        "//src/Plugins/VerilatorPlugin:VerilatorPlugin",
        "//src/Plugins/WiresharkPlugin:WiresharkPlugin",
        "//lib/Migrant/Migrant:Migrant",
        "//lib/ELFSharp/ELFSharp:ELFSharp",
        "//lib/Packet.Net/PacketDotNet:PacketDotNet",
        "//lib/CxxDemangler/CxxDemangler:CxxDemangler",
        "//lib/AntShell/AntShell:AntShell",
        "//lib/xwt/Xwt:Xwt",
        "//lib/BigGustave/src/BigGustave:BigGustave",
        "//lib/xwt/Xwt.Gtk:XwtGtk",
        "//lib/termsharp:TermSharp",
        "//lib/InpliTftpServer/libtftp:libtftp",
        "//lib/options-parser:OptionsParser",
        "//lib/FdtSharp/FdtSharp:FdtSharp",
        "//lib/bc-csharp/crypto:crypto",
        "@renode-resources//:MicrosoftScripting",
        "@renode-resources//:MonoLinqExpressions",
        "@renode-resources//:MonoTextTemplating",
        "@renode-resources//:Dynamitey",
        "@renode-resources//:Sprache",
        "@renode-resources//:CookComputingXmlRpcV2",
        "@renode-resources//:MicrosoftDynamic",
        "@resources//system.drawing.common",
        "@resources//gtksharp",
        "@resources//atksharp",
        "@resources//glibsharp",
        "@resources//cairosharp",
        "@resources//gdksharp",
        "@resources//giosharp",
        "@resources//pangosharp",
        "@resources//mono.posix.netstandard",
        "@resources//microsoft.codeanalysis.csharp",
        "@resources//microsoft.codeanalysis.visualbasic",
        "@resources//microsoft.codeanalysis.common",
        "@resources//microsoft.codeanalysis.analyzers",
        "@resources//system.codedom",
        "@resources//system.configuration.configurationmanager",
        "@resources//mono.cecil",
        "@resources//ironpython",
    ],
    defines = ["NET"],
    out = "Renode",
)
