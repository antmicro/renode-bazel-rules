load(
    "@rules_dotnet//dotnet:defs.bzl",
    "csharp_library",
)

package(default_visibility = ["//visibility:public"])

csharp_library(
    name = "cores-arm",
    srcs = [
     "src/Emulator/Cores/Arm/ARMCommon.cs",
     "src/Emulator/Cores/Arm/Arm.cs",
     "src/Emulator/Cores/Arm/ArmRegisters.cs",
     "src/Emulator/Cores/Arm/ARMv7A.cs",
     "src/Emulator/Cores/Arm/ARMv7R.cs",
     "src/Emulator/Cores/Arm/Timers/ARM_GenericTimer.cs",
     "src/Emulator/Cores/Arm/Timers/CortexAGlobalTimer.cs",
     "src/Emulator/Cores/Arm/Timers/ARM_PrivateTimer.cs",
     "src/Emulator/Cores/Arm/ARM_GenericInterruptController.cs",
     "src/Emulator/Cores/Arm/SnoopControlUnit.cs",
     "src/Emulator/Cores/Debug/CPUTracer.cs",
     "src/Emulator/Cores/Debug/FunctionCallParameter.cs",
     "src/Emulator/Cores/Debug/FunctionCallParameterType.cs",
    ],
    internals_visible_to = ["lib_cores-arm"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//toolchain_renode/Infrastructure/Emulator/Peripherals:Peripherals",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "@FdtSharp//:FdtSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:LZ4",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "//toolchain_renode/resources:Nini",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

csharp_library(
    name = "cores-arm-m",
    srcs = [
     "src/Emulator/Cores/Arm-M/CortexM.cs",
     "src/Emulator/Cores/Arm-M/CortexMRegisters.cs",
     "src/Emulator/Cores/Arm-M/NVIC.cs",
     "src/Emulator/Cores/Arm-M/DWT.cs",
    ],
    internals_visible_to = ["lib_cores-arm-m"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//toolchain_renode/Infrastructure/Emulator/Peripherals:Peripherals",
        "//:cores-arm",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:LZ4",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "//toolchain_renode/resources:Nini",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    resources = [
        "@RenodeInfrastructure//:translate-arm-m-le.so",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

csharp_library(
    name = "cores-arm64",
    srcs = [
     "src/Emulator/Cores/Arm64/ARMv8A.cs",
     "src/Emulator/Cores/Arm64/ARMv8ARegisters.cs",
     "src/Emulator/Cores/Arm64/ARMv8R.cs",
     "src/Emulator/Cores/Arm64/ARMv8RRegisters.cs",
    ],
    internals_visible_to = ["lib_cores-arm64"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//toolchain_renode/Infrastructure/Emulator/Peripherals:Peripherals",
        "//:cores-arm",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:LZ4",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "//toolchain_renode/resources:Nini",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

csharp_library(
    name = "cores-i386",
    srcs = [
     "src/Emulator/Cores/X86/X86.cs",
     "src/Emulator/Cores/X86/X86Registers.cs",
     "src/Emulator/Cores/X86/LAPIC.cs",
     "src/Emulator/Cores/X86/IOAPIC.cs",
    ],
    internals_visible_to = ["lib_cores-i386"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//toolchain_renode/Infrastructure/Emulator/Peripherals:Peripherals",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:LZ4",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "//toolchain_renode/resources:Nini",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

csharp_library(
    name = "cores-ppc",
    srcs = [
     "src/Emulator/Cores/PowerPC/PowerPc.cs",
     "src/Emulator/Cores/PowerPC/PowerPcRegisters.cs",
    ],
    internals_visible_to = ["lib_cores-ppc"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//toolchain_renode/Infrastructure/Emulator/Peripherals:Peripherals",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:LZ4",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "//toolchain_renode/resources:Nini",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

csharp_library(
    name = "cores-ppc64",
    srcs = [
     "src/Emulator/Cores/PowerPC/PowerPc64.cs",
     "src/Emulator/Cores/PowerPC/PowerPc64Registers.cs",
    ],
    internals_visible_to = ["lib_cores-ppc64"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//toolchain_renode/Infrastructure/Emulator/Peripherals:Peripherals",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:LZ4",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "//toolchain_renode/resources:Nini",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

csharp_library(
    name = "cores-riscv",
    srcs = [
     "src/Emulator/Cores/RiscV/RiscV32.cs",
     "src/Emulator/Cores/RiscV/VexRiscv.cs",
     "src/Emulator/Cores/RiscV/PicoRV32.cs",
     "src/Emulator/Cores/RiscV/RiscV32Registers.cs",
     "src/Emulator/Cores/RiscV/CoreLevelInterruptor.cs",
     "src/Emulator/Cores/RiscV/MiV_CoreLevelInterruptor.cs",
     "src/Emulator/Cores/RiscV/BaseRiscV.cs",
     "src/Emulator/Cores/RiscV/PlatformLevelInterruptController.cs",
     "src/Emulator/Cores/RiscV/PrivilegeLevel.cs",
     "src/Emulator/Cores/RiscV/IbexRiscV32.cs",
     "src/Emulator/Cores/RiscV/Minerva.cs",
     "src/Emulator/Cores/RiscV/Ri5cy.cs",
     "src/Emulator/Cores/RiscV/OpenTitan_BigNumberAcceleratorCore.cs",
     "src/Emulator/Cores/RiscV/SimpleCSR.cs",
     "src/Emulator/Cores/RiscV/CSRValidationLevel.cs",
     "src/Emulator/Cores/RiscV/RiscVCpuHooksExtensions.cs",
     "src/Emulator/Cores/RiscV/RiscVInstructionPythonEngine.cs",
     "src/Emulator/Cores/RiscV/RiscVCsrPythonEngine.cs",
     "src/Emulator/Cores/RiscV/CV32E40P.cs",
     "src/Emulator/Cores/RiscV/PULP_InterruptController.cs",
     "src/Emulator/Cores/RiscV/PULP_EventController.cs",
     "src/Emulator/Cores/RiscV/OpenTitan_PlatformLevelInterruptController.cs",
     "src/Emulator/Cores/RiscV/PLIC/IPlatformLevelInterruptController.cs",
     "src/Emulator/Cores/RiscV/PLIC/IrqContext.cs",
     "src/Emulator/Cores/RiscV/PLIC/IrqSource.cs",
     "src/Emulator/Cores/RiscV/PLIC/PlatformLevelInterruptControllerBase.cs",
     "src/Emulator/Cores/RiscV/RegisterDescription.cs",
     "src/Emulator/Cores/RiscV/NonstandardCSR.cs",
     "src/Emulator/Cores/RiscV/VectorInstructionsOpcodes.cs",
     "src/Emulator/Cores/RiscV/RiscvOpcodesParser.cs",
    ],
    internals_visible_to = ["lib_cores-riscv"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//toolchain_renode/Infrastructure/Emulator/Peripherals:Peripherals",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:LZ4",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "//toolchain_renode/resources:Nini",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

csharp_library(
    name = "cores-riscv64",
    srcs = [
     "src/Emulator/Cores/RiscV/RiscV64.cs",
     "src/Emulator/Cores/RiscV/RiscV64Registers.cs",
    ],
    internals_visible_to = ["lib_cores-riscv64"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//toolchain_renode/Infrastructure/Emulator/Peripherals:Peripherals",
        "//:cores-riscv",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:LZ4",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "//toolchain_renode/resources:Nini",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

csharp_library(
    name = "cores-sparc",
    srcs = [
     "src/Emulator/Cores/Sparc/Sparc.cs",
     "src/Emulator/Cores/Sparc/SparcRegisters.cs",
    ],
    internals_visible_to = ["lib_cores-sparc"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//toolchain_renode/Infrastructure/Emulator/Peripherals:Peripherals",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:LZ4",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "//toolchain_renode/resources:Nini",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

csharp_library(
    name = "cores-xtensa",
    srcs = [
     "src/Emulator/Cores/Xtensa/Xtensa.cs",
     "src/Emulator/Cores/Xtensa/XtensaRegisters.cs",
    ],
    internals_visible_to = ["lib_cores-xtensa"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//toolchain_renode/Infrastructure/Emulator/Peripherals:Peripherals",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:LZ4",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "//toolchain_renode/resources:Nini",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)


csharp_library(
    name = "AdvancedLoggerViewerPlugin",
    srcs = [
     "src/Plugins/AdvancedLoggerViewerPlugin/AdvancedLoggerViewer.cs",
     "src/Plugins/AdvancedLoggerViewerPlugin/AdvancedLoggerViewerCommand.cs",
     "src/Plugins/AdvancedLoggerViewerPlugin/ListViewLog.cs",
     "src/Plugins/AdvancedLoggerViewerPlugin/LogLevelsSelectionWidget.cs",
     "src/Plugins/AdvancedLoggerViewerPlugin/LogViewer.cs",
     "src/Plugins/AdvancedLoggerViewerPlugin/LogViewerHelpDialog.cs",
    ],
    internals_visible_to = ["lib_advancedloggerviewerplugin"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//:UI",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

csharp_library(
    name = "SampleCommandPlugin",
    srcs = [
     "src/Plugins/SampleCommandPlugin/HelloCommand.cs",
     "src/Plugins/SampleCommandPlugin/SampleCommandPlugin.cs",
    ],
    internals_visible_to = ["lib_samplecommandplugin"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

csharp_library(
    name = "TracePlugin",
    srcs = [
     "src/Plugins/TracePlugin/Handlers/DefaultFunctionHandler.cs",
     "src/Plugins/TracePlugin/Handlers/IFunctionHandler.cs",
     "src/Plugins/TracePlugin/Handlers/PrintfHandler.cs",
     "src/Plugins/TracePlugin/TraceCommand.cs",
     "src/Plugins/TracePlugin/TracePlugin.cs",
    ],
    internals_visible_to = ["lib_traceplugin"],
    target_frameworks = ["net6.0"],
    targeting_packs = [
        "@rules_dotnet_nuget_packages//microsoft.netcore.app.ref",
    ],
    deps = [
        "//toolchain_renode/Infrastructure/Emulator/Main:Emulator",
        "//toolchain_renode/Infrastructure/Emulator/Extensions:Extensions",
        "//toolchain_renode/Infrastructure/Emulator/Peripherals:Peripherals",
        "//:cores-arm",
        "@Migrant//:Migrant",
        "@ELFSharp//:ELFSharp",
        "@PacketDotNet//:PacketDotNet",
        "@CxxDemangler//:CxxDemangler",
        "@AntShell//:AntShell",
        "@Xwt//:Xwt",
        "@BigGustave//:BigGustave",
        "@Xwt//:XwtGtk",
        "@termsharp//:TermSharp",
        "//toolchain_renode/resources:LuceneNet",
        "//toolchain_renode/resources:IronPython",
        "//toolchain_renode/resources:IronPythonStdLib",
        "//toolchain_renode/resources:IronPythonModules",
        "//toolchain_renode/resources:MicrosoftScripting",
        "//toolchain_renode/resources:MonoLinqExpressions",
        "//toolchain_renode/resources:MonoTextTemplating",
        "//toolchain_renode/resources:Dynamitey",
        "@nuget_packages//system.drawing.common",
        "@nuget_packages//gtksharp",
        "@nuget_packages//atksharp",
        "@nuget_packages//glibsharp",
        "@nuget_packages//cairosharp",
        "@nuget_packages//gdksharp",
        "@nuget_packages//giosharp",
        "@nuget_packages//pangosharp",
        "@nuget_packages//mono.posix.netstandard",
        "@nuget_packages//microsoft.codeanalysis.csharp",
        "@nuget_packages//microsoft.codeanalysis.visualbasic",
        "@nuget_packages//microsoft.codeanalysis.common",
        "@nuget_packages//microsoft.codeanalysis.analyzers",
        "@nuget_packages//system.codedom",
        "@nuget_packages//system.configuration.configurationmanager",
        "@nuget_packages//mono.cecil",
    ],
    defines = ["NET"],
    allow_unsafe_blocks = True,
)

cc_library(
    name = "tcg",
    srcs = [
        "src/Emulator/Cores/tlib/tcg/tcg.c",
        "src/Emulator/Cores/tlib/tcg/tcg-runtime.c",
        "src/Emulator/Cores/tlib/tcg/optimize.c",
        "src/Emulator/Cores/tlib/tcg/additional.c",
        "src/Emulator/Cores/tlib/tcg/host-utils.c",
        "src/Emulator/Cores/tlib/tcg/tcg-op-gvec.c",
        "src/Emulator/Cores/tlib/tcg/tcg-op-vec.c",
        "src/Emulator/Cores/tlib/tcg/tcg-runtime-gvec.c",
    ],
    hdrs = [
        "src/Emulator/Cores/tlib/tcg/tcg.h",
        "src/Emulator/Cores/tlib/tcg/tcg-runtime.h",
        "src/Emulator/Cores/tlib/tcg/additional.h",
        "src/Emulator/Cores/tlib/tcg/host-utils.h",
        "src/Emulator/Cores/tlib/tcg/tcg-op-gvec.h",
        "src/Emulator/Cores/tlib/tcg/bswap.h",
        "src/Emulator/Cores/tlib/tcg/tcg-op.h",
        #TODO: make target as a variable
        # there is also arm
        "src/Emulator/Cores/tlib/tcg/i386/tcg-target.h",
        "src/Emulator/Cores/tlib/tcg/i386/tcg-target.c",
        "src/Emulator/Cores/tlib/tcg/tcg-memop.h",
        "src/Emulator/Cores/tlib/tcg/tcg-opc.h",
        "src/Emulator/Cores/tlib/tcg/tcg-gvec-desc.h",
        "src/Emulator/Cores/tlib/include/bit_helper.h",
        "src/Emulator/Cores/tlib/include/infrastructure.h",
        "src/Emulator/Cores/tlib/include/osdep.h",
        "src/Emulator/Cores/tlib/include/callbacks.h",
        "src/Emulator/Cores/tlib/include/def-helper.h",
    ],
    defines = [
        "HOST_LONG_BITS=64",
        "TARGET_INSN_START_EXTRA_WORDS=1",
        "TARGET_LONG_BITS=32",
    ],
    copts = [
        "-fomit-frame-pointer",
        "-O3",
        "-fPIC",
    ],
    includes = [
        "src/Emulator/Cores/tlib/tcg",
        #TODO: make target as a variable
        # there is also arm
        "src/Emulator/Cores/tlib/tcg/i386",
        "src/Emulator/Cores/tlib/include",
    ],
)

filegroup(
    name = "translate_sources",
    srcs = glob([
        "src/Emulator/Cores/tlib/*.c",
        "src/Emulator/Cores/tlib/arch/*.c",
        "src/Emulator/Cores/tlib/external/*.c",
        "src/Emulator/Cores/tlib/fpu/*.c",
        "src/Emulator/Cores/tlib/arch/arm/*.c",
        "src/Emulator/Cores/renode/*.c",
        "src/Emulator/Cores/renode/arch/arm/*.c",
    ]),
)

filegroup(
    name = "translate_headers",
    srcs = glob([
        "src/Emulator/Cores/tlib/*.h",
        "src/Emulator/Cores/tlib/arch/*.h",
        "src/Emulator/Cores/tlib/external/*.h",
        "src/Emulator/Cores/tlib/fpu/*.h",
        "src/Emulator/Cores/tlib/arch/arm/*.h",
        "src/Emulator/Cores/tlib/include/*.h",
        "src/Emulator/Cores/tlib/tcg/*.h",
        "src/Emulator/Cores/tlib/tcg/arm/*.h",
        "src/Emulator/Cores/renode/*.h",
        "src/Emulator/Cores/renode/include/*.h",
        "src/Emulator/Cores/renode/arm/*.h",
    ]),
)

#TODO: csharp_library resources doesn't allow to rename libraries
# we are creating here binary, but it is in fact library
# remove this hack, when csharp_library resources will allow to rename resources
cc_binary(
    name = "translate-arm-m-le.so",
    linkshared = True,
    srcs = [
        "//:translate_sources",
        "//:translate_headers",
    ],
    #hdrs = [
    #],
    deps = [
        "//:tcg",
    ],
    defines = [
        "HOST_BITS_64",
        "HOST_I386=1",
        "HOST_LONG_BITS=64",
        "TARGET_ARM=1",
        "TARGET_INSN_START_EXTRA_WORDS=1",
        "TARGET_INT_ALIGNMENT=4",
        "TARGET_LLONG_ALIGNMENT=4",
        "TARGET_LONG_ALIGNMENT=4",
        "TARGET_LONG_BITS=32",
        "TARGET_SHORT_ALIGNMENT=2",
        "TCG_TARGET_I386",
        "TARGET_PROTO_ARM_M=1",
    ],
    copts = [
        "-fomit-frame-pointer",
        "-O3",
        "-fPIC",
        "-Wall",
        "-Wextra",
        "-Werror",
        "-Wno-unused-parameter",
        "-Wno-sign-compare",
    ],
    includes = [
        "src/Emulator/Cores/tlib/arch/arm",
        "src/Emulator/Cores/tlib/tcg/i386",
        "src/Emulator/Cores/tlib/include",
        "src/Emulator/Cores/tlib/fpu",
        "src/Emulator/Cores/tlib/tcg",
        "src/Emulator/Cores/renode/include",
    ],
    linkopts = [
        "-Wl,--wrap=memcpy",
        "-zdefs",
        "-lpthread",
    ],
)
